package com.ztz.touchdemo;import android.animation.Animator;import android.animation.AnimatorListenerAdapter;import android.animation.AnimatorSet;import android.animation.ObjectAnimator;import android.content.Intent;import android.content.pm.PackageInfo;import android.content.pm.PackageManager;import android.os.Bundle;import android.os.Handler;import android.support.v7.app.AppCompatActivity;import android.util.Log;import android.view.WindowManager;import android.widget.ImageView;import android.widget.TextView;import java.util.Random;public class welcomeActivity extends AppCompatActivity {    private static final String TAG = "welcomeActivity";    private Handler handler;    int[] images;    private ImageView iv_bg;    @Override    protected void onCreate(Bundle savedInstanceState) {        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_welcome);        findView();        randomIndex();        animateImage();        //两秒后执行run方法;        handler=new Handler();        TextView tv_version=(TextView)findViewById(R.id.tv_version);        tv_version.setText(getVersion()+"");    }    //获取版本号    private String getVersion() {        try{            PackageManager manger=getPackageManager();            PackageInfo info=manger.getPackageInfo(getPackageName(),0);            String versionName=info.versionName;            return versionName;        } catch (PackageManager.NameNotFoundException e) {            e.printStackTrace();            return "1.0";        }    }    @Override    protected void onPause() {        super.onPause();        handler.removeCallbacks(runnable);    }    Runnable runnable=new Runnable() {        @Override        public void run() {            Intent intent=new Intent(welcomeActivity.this,MainActivity.class);            startActivity(intent);            Log.i(TAG, "run: 执行任务");            finish();        }    };    @Override    protected void onDestroy() {        handler.removeCallbacks(runnable);        Log.i(TAG, "onDestroy: 移除任务");        super.onDestroy();    }    private void animateImage() {        //属性动画        //属性一：view对象        //属性二：动画改变类型        ObjectAnimator animatorX=ObjectAnimator.ofFloat(iv_bg,"scaleX",1f,SCALE_SIZE);        ObjectAnimator animatorY=ObjectAnimator.ofFloat(iv_bg,"scaleY",1f,SCALE_SIZE);        AnimatorSet set=new AnimatorSet();        set.setDuration(2000).play(animatorX).with(animatorY);        set.start();        set.addListener(new AnimatorListenerAdapter() {            @Override            public void onAnimationEnd(Animator animation) {                super.onAnimationEnd(animation);                Intent intent=new Intent(welcomeActivity.this,MainActivity.class);                startActivity(intent);                finish();            }        });    }    private void randomIndex() {        images=new int[]{R.mipmap.bg_s1,R.mipmap.bg_s2};        Random random=new Random();        int index=random.nextInt(images.length);        iv_bg.setImageResource(images[index]);    }    public static final float SCALE_SIZE=1.2f;    private void findView() {        iv_bg=(ImageView)findViewById(R.id.iv_bg);    }}